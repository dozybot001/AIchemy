/* --- 1. Shared Feature Bases (补充 Components 中未覆盖的特定视图容器) --- */
.file-tree-widget, .diff-content-view {
  flex-grow: 1; width: 100%; border: none; background: transparent;
  color: var(--text-secondary); padding: 20px 24px;
  font-family: var(--font-code); font-size: 0.9rem; line-height: 1.6;
  resize: none; outline: none; white-space: pre-wrap; overflow-y: auto;
}

/* --- 2. Gemini Hero Input (首页 AI 输入框) --- */
.gemini-hero-container {
  width: 100%; display: flex; justify-content: center;
  margin-bottom: 10px; animation: fadeIn 0.5s ease-out;
}

.gemini-input-wrapper {
  width: 100%; max-width: 800px;
  background: rgba(20, 20, 23, 0.8);
  backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
  border: 1px solid var(--border-subtle); border-radius: var(--radius-pill);
  padding: 6px 6px 6px 24px;
  display: flex; align-items: center; gap: 12px;
  box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.5);
  transition: all 0.3s ease;
}
.gemini-input-wrapper:hover, .gemini-input-wrapper:focus-within {
  border-color: rgba(255,255,255,0.25); background: rgba(30, 30, 35, 0.9);
  transform: translateY(-2px) scale(1.005);
}

.gemini-main-input {
  flex-grow: 1; background: transparent; border: none;
  color: var(--text-primary); font-size: 1rem; height: 40px; outline: none;
}
/* Mobile adjustment for input */
@media (max-width: 768px) {
  .gemini-input-wrapper { padding: 6px 6px 6px 16px; }
  .gemini-main-input { font-size: 1rem; }
}

/* --- 3. Prompt Architect (Prompt 架构师) --- */
.architect-container {
  flex-grow: 1; overflow-y: auto; padding: 24px;
  display: flex; flex-direction: column; gap: 24px;
}
.architect-options-area {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 16px; animation: fadeIn 0.4s ease;
}

.option-group-card {
  background: rgba(255,255,255,0.02);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-md); padding: 16px;
}
.option-group-title {
  color: var(--text-primary); font-size: 0.9rem; font-weight: 600;
  margin-bottom: 12px; display: block;
}

.option-chips { display: flex; flex-wrap: wrap; gap: 8px; }
.chip-input { display: none; }
.chip-label {
  cursor: pointer; font-size: 0.85rem; padding: 6px 12px;
  border-radius: var(--radius-pill); background: rgba(255,255,255,0.05);
  color: var(--text-secondary); border: 1px solid transparent;
  transition: all 0.2s; user-select: none;
}
.chip-input:checked + .chip-label {
  background: #333; color: #fff; border-color: #555;
}

.divider-line { height: 1px; background: var(--border-subtle); width: 100%; }

/* --- 4. File Tree Widget (文件树) --- */
.file-tree-widget {
  min-height: 250px; border-radius: 8px; padding: 1rem; color: #888;
  transition: all 0.2s;
}
.file-tree-widget.is-dragover {
  border-color: #4a9eff; background-color: rgba(74, 158, 255, 0.1);
}

.tree-node {
  display: flex; align-items: center; padding: 4px 8px;
  border-radius: 4px; transition: background 0.1s; cursor: default;
}
.tree-node.tree-node--file { cursor: pointer; }
.tree-node.tree-node--file:hover { background-color: rgba(255, 255, 255, 0.05); }
.tree-node.is-disabled { text-decoration: line-through; opacity: 0.4; }

.tree-connector { opacity: 0.5; }
.node-label { margin-right: 8px; }
.tree-node--folder { color: var(--text-primary); font-weight: 600; }

/* --- 5. Diff Viewer (差异对比视图) --- */
.diff-loader { text-align: center; padding: 20px; color: var(--text-tertiary); }

.diff-file-wrapper {
  margin-bottom: 24px; border: 1px solid var(--border-subtle);
  border-radius: var(--radius-md); background: var(--bg-surface); overflow: hidden;
}

.diff-file-info {
  padding: 12px 16px; background: rgba(255, 255, 255, 0.05);
  border-bottom: 1px solid var(--border-subtle); font-weight: 600;
  color: var(--text-primary);
  display: flex; justify-content: space-between; align-items: center;
}
.diff-file-info.is-error { color: #ff6b6b; }
.diff-badge { font-size: 0.8em; opacity: 0.8; }
.diff-label-baseline { opacity: 0.6; }

.diff-hunk-container { padding: 16px; display: flex; flex-direction: column; gap: 16px; }

/* Hunk Cards */
.hunk-card {
  border: 1px solid var(--border-subtle); border-radius: 8px;
  background: rgba(0,0,0,0.2); transition: all 0.2s ease;
}
.hunk-card.rejected { border-color: transparent; }
.hunk-card.rejected .diff-pane { opacity: 0.3; filter: grayscale(1); }

.hunk-header {
  padding: 8px 12px; background: rgba(255,255,255,0.02);
  border-bottom: 1px solid var(--border-subtle); display: flex;
  justify-content: space-between; align-items: center; font-size: 0.8rem;
  color: var(--text-tertiary);
}
.hunk-header.is-invalid { background: rgba(255, 50, 50, 0.1); color: #ffaaaa; }

.hunk-actions { display: flex; align-items: center; gap: 8px; }
.hunk-warning-icon { color: #ff6b6b; margin-right: 10px; }

.hunk-toggle {
  cursor: pointer; padding: 4px 8px; border-radius: 4px;
  background: rgba(255,255,255,0.1); color: var(--text-primary);
  font-size: 0.75rem; border: 1px solid transparent; user-select: none;
}
.hunk-toggle:hover { background: rgba(255,255,255,0.2); }
.hunk-toggle.is-rejected {
  background: rgba(255, 50, 50, 0.15); color: #ff8888; text-decoration: line-through;
}

/* Split Panes */
.diff-split-view { display: flex; width: 100%; }
.diff-pane {
  flex: 1; padding: 12px; font-family: var(--font-code); font-size: 0.85rem;
  white-space: pre-wrap; word-break: break-all;
}
.diff-pane.pane-old {
  border-right: 1px solid var(--border-subtle);
  background: rgba(0, 0, 0, 0.2); color: var(--text-tertiary);
}
.diff-pane.pane-new {
  background: rgba(255, 255, 255, 0.02); color: var(--text-primary);
}

.diff-message {
  padding: 20px; text-align: center; color: var(--text-tertiary);
  font-style: italic; border-top: 1px dashed var(--border-subtle);
}

/* Diff Syntax Highlighting */
del { text-decoration: line-through; opacity: 0.5; }
ins {
  text-decoration: none; background-color: rgba(255, 255, 255, 0.15);
  color: #fff; border-radius: 2px; padding: 0 2px;
}