<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unknown</title>
    <link rel="stylesheet" href="css/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div id="toast-overlay"></div>
    <nav class="app-header">
        <a href="https://github.com/dozybot001/AIchemy" class="ui-btn">GitHub</a>
        <a href="https://dozybot001.github.io" class="ui-btn">Blog</a>
        <button id="action-settings" class="ui-btn">⚙️</button> 
    </nav>
    <div class="layout-section">
        <div class="hero-banner"><h1>Unknown</h1></div>
    </div>
    <div class="layout-section">
        <div class="app-workspace">
            <input type="file" id="input-upload-directory" class="hidden-input" webkitdirectory directory multiple>
            <input type="file" id="input-upload-files" class="hidden-input" multiple>
            <input type="file" id="input-upload-baseline" class="hidden-input" accept=".txt,text/plain">

            <div class="gemini-hero-container">
                <div class="gemini-input-wrapper">
                    <input type="text" id="input-req-command" class="gemini-main-input" autocomplete="off">
                    <button class="ui-btn" id="action-analyze-req">分析</button>
                </div>
            </div>
            
            <div class="ui-card" id="card-prompt-architect">
                <div class="ui-card__header">
                    <h2>Prompt 架构师</h2>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-gen-prompt">生成 Prompt</button>
                        <button class="ui-btn" id="action-copy-prompt">复制</button>
                        <button class="ui-btn" id="action-reset-architect">🗑️</button>
                    </div>
                </div>
                <div class="architect-container">
                    <div id="container-req-options" class="architect-options-area hidden"></div>
                    <div id="container-final-prompt" class="architect-result-area hidden">
                        <div class="divider-line mb-3"></div>
                        <textarea class="ui-editor-area auto-grow-textarea" id="output-architect-prompt" readonly></textarea>
                    </div>
                </div>
            </div>

            <div class="ui-card">
                <div class="ui-card__header">
                    <h2>项目文件</h2>
                    <div class="ui-stat-group">
                        <span>文件数</span> <span class="ui-stat-value" id="display-file-count">0</span>
                        <span>Token 估算</span> <span class="ui-stat-value" id="display-token-estimator">0</span>
                    </div>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-import-dir">加载项目</button>
                        <button class="ui-btn" id="action-copy-structure">复制树</button>
                        <button class="ui-btn" id="action-append-files">追加</button>
                        <button class="ui-btn" id="action-select-all">全选</button>
                        <button class="ui-btn" id="action-merge-content">合并</button> 
                        <button class="ui-btn" id="action-reset-workspace">清空</button>
                    </div>
                </div>
                <textarea class="ui-editor-area" id="viewer-file-tree"></textarea>
            </div>

            <div class="ui-card">
                <div class="ui-card__header">
                    <h2>合并预览</h2>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-copy-result">复制</button>
                        <button class="ui-btn" id="action-download-text">下载</button>
                        <button class="ui-btn" id="action-clear-result">清空</button>
                    </div>
                </div>
                <textarea class="ui-editor-area" id="editor-merge-result" readonly></textarea>
            </div>

            <div class="ui-card">
                <div class="ui-card__header">
                    <h2>粘贴补丁</h2>
                    <div class="ui-stat-group">
                        <span>基准文件</span> <span class="ui-stat-value" id="display-baseline-name">~</span>
                    </div>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-upload-baseline">上传基准文本</button>
                        <button class="ui-btn" id="action-preview-patch">预览变更</button>
                        <button class="ui-btn" id="action-clear-patch">清空</button>
                    </div>
                </div>
                <textarea class="ui-editor-area" id="input-patch-source"></textarea>
            </div>
            
            <div class="ui-card">
                <div class="ui-card__header">
                    <h2>变更预览</h2>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-apply-download">应用 & 下载</button>
                        <button class="ui-btn" id="action-apply-copy">应用 & 复制</button>
                        <button class="ui-btn" id="action-clear-diff">清空</button>
                    </div>
                </div>
                <div class="ui-editor-area diff-content-view" id="viewer-diff-result"></div>
            </div>

            <div class="ui-card">
                <div class="ui-card__header">
                    <h2>手动还原</h2>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-export-zip">打包下载</button> 
                        <button class="ui-btn" id="btnClearRestore">清空</button>
                    </div>
                </div>
                <textarea class="ui-editor-area" id="input-restore-source"></textarea>
            </div>
        </div>
    </div>

    <div id="modal-settings" class="modal-overlay hidden">
        <div class="ui-card modal-content">
            <div class="ui-card__header">
                <h2>⚙️ 配置</h2>
                <button class="ui-btn" id="action-close-settings">✕</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>API Base URL</label>
                    <input type="text" id="setting-base-url" class="ui-input" placeholder="例如: https://api.openai.com/v1">
                </div>
                <div class="form-group">
                    <label>API Key</label>
                    <input type="password" id="setting-api-key" class="ui-input">
                </div>
                <div class="form-group">
                    <label>模型 Model</label>
                    <input type="text" id="setting-model" class="ui-input" placeholder="例如: gpt-4o">
                </div>
            </div>
            <div class="modal-footer">
                <button class="ui-btn" id="action-save-settings">保存</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/diff_match_patch/20121119/diff_match_patch.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/core.js"></script>
    <script src="js/app.js"></script>
</body>
</html>